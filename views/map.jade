extends layout

block content

  .container
    #map

  script(type='text/javascript').
    var data = !{JSON.stringify(locals)}

    var map = L.map('map').setView([48.871764,2.385085], 15);
         
    L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
    }).addTo(map);
         
     // markers
     for (var i = 0; i < data.accounts.length-1; i++) {
       if(data.accounts[i].geocoding[0]) {
         L.marker([data.accounts[i].geocoding[0].latitude, data.accounts[i].geocoding[0].longitude]).bindPopup(
           "<h1>"+ data.accounts[i].structureName +"</h1><p>"+data.accounts[i].geocoding[0].formattedAddress+"</p><p>"+data.accounts[i].website+"</p><p>"+data.accounts[i].metro+"</p>").addTo(map);
       }
     }
